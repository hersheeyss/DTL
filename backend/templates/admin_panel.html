<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel — Student Election</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">

    <!-- Ethers.js (required for MetaMask) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.1/ethers.umd.min.js"></script>
</head>

<body>

<header class="navbar">
    <span>Admin Panel — Blockchain Verification</span>
    <a href="{{ url_for('logout') }}" class="logout">Logout</a>
</header>

<main class="container">

    <!-- DB VOTES -->
    <section class="card">
        <h3>Local Database Counts</h3>
        <table>
            <tr><th>Candidate</th><th>Votes (DB)</th></tr>
            <tr><td>Candidate 1</td><td id="db1">{{ db_counts.get(1, 0) }}</td></tr>
            <tr><td>Candidate 2</td><td id="db2">{{ db_counts.get(2, 0) }}</td></tr>
            <tr><td>Candidate 3</td><td id="db3">{{ db_counts.get(3, 0) }}</td></tr>
        </table>
    </section>

    <!-- BLOCKCHAIN VOTES -->
    <section class="card">
        <h3>Blockchain Counts</h3>
        <table>
            <tr><th>Candidate</th><th>Votes (Blockchain)</th></tr>
            <tr><td>Candidate 1</td><td id="bc1">{{ bc_votes[1] }}</td></tr>
            <tr><td>Candidate 2</td><td id="bc2">{{ bc_votes[2] }}</td></tr>
            <tr><td>Candidate 3</td><td id="bc3">{{ bc_votes[3] }}</td></tr>
        </table>

        <button id="refreshBcBtn" class="refresh-btn">Refresh Blockchain Counts</button>
    </section>

    <!-- PUSH TO BLOCKCHAIN -->
    <section class="card">
        <h3>Push DB Votes → Blockchain</h3>
        <p>MetaMask (Sepolia) required. One transaction per vote.</p>

        <button id="pushBtn" class="push-btn">Push Now</button>

        <p style="color:#555; font-size:0.8rem; margin-top:10px;">
            Important: Push only once after voting ends.
        </p>
    </section>

</main>

<script src="{{ url_for('static', filename='js/admin.js') }}"></script>

</body>
</html>



